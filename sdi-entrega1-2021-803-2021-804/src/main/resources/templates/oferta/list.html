<!DOCTYPE html>
<html lang="en">
<head th:replace="fragments/head" />

<body id = "lista">

	<!-- Barra de NavegaciÃ³n superior -->
	<nav th:replace="fragments/nav" />
	<div class="container">
		<h2 th:text="#{oferta.lista.titulo}">Ofertas</h2>
		<form class="navbar-form" action="/oferta/list">
 			<div class="form-group">
 				<input name="searchText" type="text" class="form-control" size="50"
 					placeholder="Buscar por titulo">
 			</div>
 			<button type="submit" class="btn btn-default" th:text="#{oferta.buscar}">Buscar</button>
		</form>
 
		<p th:text="#{oferta.lista}">Los resultados de ofertas que figuran en el sistema son:</p>
		<button type="button" id="updateButton" class="btn btn-default" th:text="#{oferta.actualizar}">Actualizar</button>
		<script th:inline="javascript">
			/*<![CDATA[*/
				$("#updateButton").click(function() {
					 var numberPage = [[${param.page}]];
					 var urlUpdate = '/oferta/list/update';
					 if (numberPage != null ){
					 	urlUpdate += "?page="+numberPage[0];
					 }
					 $("#tableOfertas").load(urlUpdate);
				});
			/*]]>*/
		</script>
		<div class="table-responsive">
		<table th:replace="fragments/tableOfertas" th:fragment="tableOfertas" id="tableOfertas"/>
		</div>
		<footer th:replace="fragments/pagination"/>
	</div>
	<footer th:replace="fragments/footer" />
</body>
</html>
